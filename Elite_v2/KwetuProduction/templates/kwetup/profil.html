{% load static %}
{% include './resource2.html' %}

{% block content %}

<div class="container mt-5">
    {% if user.is_authenticated %}

        <div class="row">
            <div class="col-md-6 me-auto">
                <div class="card col-md-12">
                    <div class="row">
                        <a class="text-end col-md-4 me-auto" id="qrcode"></a>
                        <a class="mx-auto col-md-6 nav-link link-dark">
                            <h5>Profil: {{ user.username }} {{ user.first_name }}</h5>
                        </a>
                    </div>
                    {% if user.imgProfil %}
                        <img class="rounded-5 bd-placeholder-img bd-placeholder-img-lg featurette-image img-fluid mx-auto" width="35%" height="20%" src="{{ user.imgProfil.url }}" role="img" preserveAspectRatio="xMidYMid slice" focusable="false"><title>Placeholder</title><fill="#eee"/></img>
                    {% else %}
                        <img class="bd-placeholder-img bd-placeholder-img-lg featurette-image img-fluid mx-auto" width="35%" src="{% static 'image/defaultProfil.png' %}" role="img" preserveAspectRatio="xMidYMid slice" focusable="false"><title>Placeholder</title><fill="#eee"/></img>
                    {% endif %}
                    <div class="card-body text-center">
                        <h5 class="card-title">{{ user.username }} {{ user.last_name }} {{ user.first_name }}</h5>
                        <p class="card-text">{{ user.email }}</p>
                        <a href="#" class="btn btn-primary small">Modifier la photo</a>
                    </div>
                </div>
            </div>
            <div class="col-md-6 me-auto">
                <div class="card">
                    <div class="card-header">
                        <h5 class="card-title">Modifier le profil</h5>
                    </div>
                    <div class="card-body">
                        <form method="POST" action="{% url 'kwetu:profil' %}">
                            {% csrf_token %}
                            <div class="form-group">
                                <label for="nom">Nom</label>
                                <input class="form-control" type="text" value="{{ user.username }}">
                            </div>
                            <div class="form-group">
                                <label for="prenom">Prénom</label>
                                <input class="form-control" type="text" value="{{ user.last_name }}">
                            </div>
                            <div class="form-group">
                                <label for="poste">Prenom</label>
                                <input class="form-control" type="text" value="{{ user.first_name }}">
                            </div>
                            <div class="form-group">
                                <label for="email">Email</label>
                                <input class="form-control" type="text" value="{{ user.email }}"><br>
                            </div>
                            <div class="form-group">
                                <br>
                                 <button class="btn btn-primary" type="submit">Modifier</button>
                                <br><br>
                            </div>
                        </form>
                        <div class="card-header">
                            <h6>Autres info consernant le vente et achat: </h6>
                        </div>
                    </div>
                </div>
            </div>
        </div>
</div>



    <!-- Incluez qrcode.js (ou une autre bibliothèque de génération de code QR) -->
    <script src="https://cdn.rawgit.com/davidshimjs/qrcodejs/gh-pages/qrcode.min.js"></script>
    <script>
        // Exemple de génération de code QR avec l'ID de l'utilisateur
        const userId = {{ user.id }}; // Remplacez par l'ID réel de l'utilisateur
        const qrcode = new QRCode(document.getElementById("qrcode"), {
            text: `${userId}`,
            width: 80,
            height: 80
        });
    </script>

   {% endif %}
    <!-- Modals similaires pour Prénom, Poste et Email -->

    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

{% endblock %}
{% include './footer.html' %}